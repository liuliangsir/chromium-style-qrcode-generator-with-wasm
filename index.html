<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="color-scheme" content="light" />
    <title>Chromium Style QR Code Generator</title>
    <link rel="stylesheet" href="./src/app.css" />
    <!-- Preload critical resources for better performance -->
    <link rel="preload" href="./src/qrcode_generator_with_wasm.js" as="script" />
    <link rel="preload" href="./src/qrcode_generator_with_wasm_bg.wasm" as="fetch" type="application/wasm" crossorigin />
  </head>
  <body>
    <div class="bubble-container">
      <!-- Title matching Chromium's IDS_BROWSER_SHARING_QR_CODE_DIALOG_TITLE -->
      <h2>QR code</h2>

      <!-- QR code display area with border and background matching Chromium -->
      <div class="qr-code-area">
        <canvas id="qrCanvas" width="240" height="240"></canvas>
        <div id="centerErrorLabel" class="error-label center-error hidden">Could not generate QR code. Please try again.</div>
      </div>

      <!-- Input field matching Chromium's textfield with accessibility -->
      <input
        type="text"
        id="urlInput"
        placeholder="Enter URL or text"
        aria-label="URL or text to encode"
        maxlength="2000"
      />

      <!-- Bottom error for input too long, matching Chromium's behavior -->
      <div id="bottomErrorLabel" class="error-label bottom-error hidden">Input is too long. Please shorten the text to 2000 characters or less.</div>

      <!-- Center image selection -->
      <div class="center-image-section">
        <label for="centerImageSelect" class="section-label">Center Image:</label>
        <div class="center-image-controls">
          <select id="centerImageSelect" class="center-image-select">
            <option value="none">No Center Image</option>
            <option value="dino" selected>Chromium Dino</option>
            <option value="custom">Custom Image</option>
          </select>
          <input type="file" id="customImageInput" accept="image/*" class="custom-image-input hidden" />
          <button id="customImageButton" class="custom-image-button hidden">Choose Image</button>
        </div>
        <div id="customImagePreview" class="custom-image-preview hidden">
          <img id="customImageImg" alt="Custom center image preview" />
          <button id="removeCustomImage" class="remove-custom-image">×</button>
        </div>
      </div>

      <!-- Button container with tooltip and buttons, matching Chromium's layout -->
      <div class="button-container">
        <span class="tooltip" title="Generates a QR code for the entered text."
          >ⓘ</span
        >
        <div class="spacer"></div>
        <button id="copyButton" disabled>Copy</button>
        <button id="downloadButton" disabled>Download</button>
      </div>
    </div>
    <script type="module" src="./src/app.js"></script>
  </body>
</html>
